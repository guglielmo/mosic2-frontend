<h3 class="page-title">Registro - <span class="fw-semi-bold">Tutti i registri</span></h3>

<div class="row">
    <div class="col-lg-12">
        <section class="widget" widget>
            <div class="widget-body">
                <table class="table table-hover table-condensed mb-0" [mfData]="registri" #mf="mfDataTable" stickthead>
                    <thead>
                    <tr>
                        <th colspan="4"></th>
                        <th colspan="2">Protocollo Arrivo</th>
                        <th colspan="2">Protocollo Mittente</th>
                        <th colspan="2"></th>
                    </tr>
                    <tr>
                        <th><mfDefaultSorter by="id">Codice</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="oggetto">Oggetto</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="mittente">Mittente</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="repertorio">Repertorio</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="protocollo_arrivo">Numero</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="data_arrivo">Data</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="protocollo_mittente">Numero</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="data_mittente">Data</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="allegati">Documento</mfDefaultSorter></th>
                        <th>Azioni</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let registro of mf.data" (click)="editId(registro.id)" class="clickable">
                        <td>{{registro.id}}</td>
                        <td>{{registro.oggetto}}</td>
                        <td>{{registro.mittente}}</td>
                        <td>{{registro.titolario}}.{{registro.numero_fascicolo}}</td>
                        <td>{{registro.protocollo_arrivo}}</td>
                        <td class="nowrap">{{registro.data_arrivo | date: 'dd/MM/yyyy' }}</td>
                        <td>{{registro.protocollo_mittente}}</td>
                        <td class="nowrap">{{registro.data_mittente | date: 'dd/MM/yyyy'}}</td>
                        <td>{{registro.allegati}}</td>
                        <td>
                            <a (click)="askDeleteTitolari(myModal, registro)"><i class="fa fa-trash-o"> </i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <footer>
            </footer>
        </section>
    </div>
</div>

<modal #myModal cancelButtonLabel="Annulla" submitButtonLabel="Conferma" [hideCloseButton]="true" (onSubmit)="confirmDeleteRegistri(myModal)">
    <modal-header>
        <h4 class="modal-title text-xs-center fw-bold mt">Conferma cancellazione registro</h4>
    </modal-header>
    <modal-content>
        <h4 class="text-xs-center mt-sm">
            Vuoi eliminare il registro <strong>{{deletingRegistri.id}}</strong><br/>
            {{deletingRegistri.oggetto}} ?
        </h4>
    </modal-content>
    <modal-footer>
    </modal-footer>
</modal>