<div class="pull-right">
    <a [routerLink]=" ['/app/users/edit'] " class="btn btn-primary btn-save">Nuovo Utente</a>
</div>
<h3 class="page-title">Utenti / <span class="fw-semi-bold">Tutti gli utenti</span></h3>

<div class="row">
    <div class="col-lg-12">
        <section class="widget" widget>
            <div class="widget-body">
                <table class="table table-hover table-condensed mb-0" [mfData]="users" #mf="mfDataTable" stickthead>
                    <thead>
                    <tr>
                        <th><mfDefaultSorter by="lastName">Cognome e Nome</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="userName">Nome utente</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="eMail">E-Mail</mfDefaultSorter></th>
                        <th><mfDefaultSorter by="registrationDate">Data registrazione</mfDefaultSorter></th>
                        <th>Ruolo</th>
                        <th>Ufficio</th>
                        <th>IP</th>
                        <th>Stazione</th>
                        <th>Stato</th>
                        <th>Azioni</th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr *ngFor="let user of mf.data" (click)="editId(user.id)" class="clickable">
                        <td>{{user.lastName}} {{user.firstName}}</td>
                        <td>{{user.userName}}</td>
                        <td>{{user.eMail}}</td>
                        <td>{{user.registrationDate | date: 'dd/MM/yyyy HH:mm'}}</td>
                        <td>{{user.id_ruoli_cipe}} - {{user.id_ruoli_cipe | dataEnum : apiService.dataEnum : 'ruoli_cipe' : 'denominazione' }}</td>
                        <td>{{user.id_uffici | dataEnum : apiService.dataEnum : 'uffici' : 'denominazione' }}</td>
                        <td>{{user.ip}}</td>
                        <td>{{user.stazione}}</td>
                        <td>
                            <span *ngIf="user.cessatoServizio === '0'" class="tag tag-success">Attivo</span>
                            <span *ngIf="user.cessatoServizio === '1'" class="tag tag-danger">Cessato servizio</span>
                        </td>
                        <td>
                            <a (click)="askDeleteUser($event, myModal, user)"><i class="fa fa-trash-o"> </i></a>
                        </td>
                    </tr>
                    </tbody>
                </table>
            </div>
            <footer>
            </footer>
        </section>
    </div>
</div>

<modal #myModal cancelButtonLabel="Annulla" submitButtonLabel="Conferma" [hideCloseButton]="true" (onSubmit)="confirmDeleteUser(myModal)">
    <modal-header>
        <h4 class="modal-title text-xs-center fw-bold mt">Conferma cancellazione utente</h4>
    </modal-header>
    <modal-content>
        <h4 class="text-xs-center mt-sm">
            Vuoi eliminare l'utente <strong>{{deletingUser.userName}}</strong><br/>
            {{deletingUser.firstName}} {{deletingUser.lastName}} - {{deletingUser.eMail}}<br/>
            registrato il {{deletingUser.registrationDate | date: 'dd/MM/yyyy HH:mm'}} ?
        </h4>
    </modal-content>
    <modal-footer>
    </modal-footer>
</modal>